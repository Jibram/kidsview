    var dummy_coord = '{"Unnamed: 0":{"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,"10":10,"11":11,"12":12,"13":13,"14":14,"15":15,"16":16,"17":17,"18":18,"19":19,"20":20,"21":21,"22":22,"23":23,"24":24,"25":25,"26":26,"27":27,"28":28,"29":29,"30":30,"31":31,"32":32,"33":33,"34":34,"35":35,"36":36,"37":37,"38":38,"39":39,"40":40,"41":41,"42":42,"43":43,"44":44,"45":45,"46":46,"47":47,"48":48,"49":49,"50":50,"51":51,"52":52,"53":53,"54":54,"55":55,"56":56,"57":57,"58":58,"59":59,"60":60,"61":61,"62":62,"63":63,"64":64,"65":65,"66":66,"67":67,"68":68,"69":69,"70":70,"71":71,"72":72,"73":73,"74":74,"75":75,"76":76,"77":77,"78":78,"79":79,"80":80,"81":81,"82":82,"83":83,"84":84,"85":85,"86":86,"87":87,"88":88,"89":89,"90":90,"91":91,"92":92,"93":93,"94":94,"95":95,"96":96,"97":97,"98":98,"99":99,"100":100,"101":101,"102":102,"103":103,"104":104,"105":105,"106":106,"107":107,"108":108,"109":109,"110":110,"111":111,"112":112,"113":113,"114":114,"115":115,"116":116,"117":117,"118":118,"119":119,"120":120,"121":121,"122":122,"123":123,"124":124,"125":125,"126":126,"127":127,"128":128,"129":129,"130":130,"131":131,"132":132,"133":133,"134":134,"135":135,"136":136,"137":137,"138":138,"139":139,"140":140,"141":141,"142":142,"143":143,"144":144,"145":145,"146":146,"147":147,"148":148,"149":149,"150":150,"151":151,"152":152,"153":153,"154":154,"155":155,"156":156,"157":157,"158":158,"159":159,"160":160,"161":161,"162":162},"lx":{"0":262,"1":240,"2":228,"3":224,"4":219,"5":215,"6":239,"7":250,"8":251,"9":240,"10":240,"11":230,"12":223,"13":244,"14":1146,"15":1153,"16":1126,"17":250,"18":251,"19":1053,"20":1049,"21":1042,"22":1050,"23":508,"24":509,"25":505,"26":494,"27":482,"28":474,"29":467,"30":460,"31":465,"32":490,"33":511,"34":402,"35":381,"36":361,"37":351,"38":353,"39":359,"40":363,"41":356,"42":349,"43":347,"44":350,"45":358,"46":377,"47":378,"48":360,"49":359,"50":359,"51":357,"52":338,"53":337,"54":339,"55":342,"56":348,"57":353,"58":354,"59":355,"60":356,"61":356,"62":354,"63":358,"64":371,"65":374,"66":372,"67":375,"68":375,"69":374,"70":373,"71":371,"72":363,"73":359,"74":361,"75":356,"76":357,"77":342,"78":354,"79":355,"80":356,"81":356,"82":356,"83":343,"84":341,"85":340,"86":339,"87":342,"88":346,"89":348,"90":351,"91":353,"92":354,"93":354,"94":357,"95":361,"96":375,"97":384,"98":390,"99":388,"100":383,"101":373,"102":366,"103":368,"104":372,"105":354,"106":347,"107":345,"108":344,"109":340,"110":358,"111":361,"112":363,"113":365,"114":367,"115":366,"116":376,"117":393,"118":394,"119":373,"120":372,"121":372,"122":371,"123":362,"124":351,"125":350,"126":350,"127":367,"128":370,"129":372,"130":373,"131":376,"132":376,"133":377,"134":376,"135":377,"136":390,"137":398,"138":396,"139":396,"140":393,"141":393,"142":371,"143":372,"144":371,"145":371,"146":366,"147":369,"148":372,"149":373,"150":372,"151":373,"152":372,"153":371,"154":370,"155":368,"156":366,"157":362,"158":362,"159":346,"160":337,"161":339,"162":331},"ly":{"0":324,"1":326,"2":325,"3":332,"4":340,"5":346,"6":360,"7":364,"8":367,"9":373,"10":372,"11":372,"12":360,"13":370,"14":385,"15":396,"16":401,"17":364,"18":364,"19":430,"20":437,"21":437,"22":430,"23":400,"24":402,"25":405,"26":408,"27":407,"28":411,"29":416,"30":391,"31":366,"32":335,"33":302,"34":158,"35":163,"36":163,"37":165,"38":166,"39":165,"40":167,"41":169,"42":168,"43":169,"44":169,"45":169,"46":176,"47":178,"48":174,"49":177,"50":177,"51":177,"52":176,"53":177,"54":177,"55":176,"56":177,"57":180,"58":178,"59":178,"60":179,"61":179,"62":179,"63":179,"64":180,"65":184,"66":184,"67":184,"68":185,"69":186,"70":183,"71":182,"72":179,"73":182,"74":182,"75":181,"76":182,"77":178,"78":181,"79":181,"80":182,"81":181,"82":182,"83":178,"84":181,"85":180,"86":181,"87":182,"88":183,"89":185,"90":183,"91":184,"92":183,"93":183,"94":180,"95":174,"96":178,"97":176,"98":189,"99":208,"100":208,"101":205,"102":212,"103":215,"104":216,"105":218,"106":222,"107":225,"108":224,"109":222,"110":220,"111":220,"112":221,"113":221,"114":220,"115":222,"116":223,"117":237,"118":237,"119":226,"120":224,"121":224,"122":224,"123":223,"124":226,"125":229,"126":230,"127":228,"128":228,"129":227,"130":229,"131":232,"132":234,"133":235,"134":236,"135":236,"136":239,"137":245,"138":238,"139":238,"140":236,"141":238,"142":226,"143":226,"144":227,"145":227,"146":227,"147":227,"148":228,"149":229,"150":230,"151":229,"152":229,"153":228,"154":226,"155":224,"156":225,"157":224,"158":220,"159":166,"160":136,"161":144,"162":197},"rx":{"0":336,"1":328,"2":327,"3":339,"4":345,"5":351,"6":370,"7":375,"8":379,"9":385,"10":383,"11":385,"12":365,"13":365,"14":359,"15":372,"16":376,"17":372,"18":364,"19":394,"20":404,"21":401,"22":396,"23":400,"24":399,"25":404,"26":405,"27":406,"28":411,"29":416,"30":391,"31":367,"32":338,"33":306,"34":166,"35":175,"36":174,"37":175,"38":175,"39":176,"40":178,"41":181,"42":180,"43":180,"44":181,"45":181,"46":183,"47":186,"48":186,"49":187,"50":188,"51":188,"52":190,"53":190,"54":189,"55":187,"56":187,"57":188,"58":189,"59":189,"60":189,"61":190,"62":190,"63":189,"64":188,"65":189,"66":192,"67":191,"68":191,"69":192,"70":191,"71":191,"72":190,"73":191,"74":191,"75":190,"76":191,"77":187,"78":191,"79":190,"80":190,"81":191,"82":190,"83":186,"84":193,"85":192,"86":192,"87":192,"88":193,"89":193,"90":192,"91":193,"92":192,"93":194,"94":190,"95":187,"96":190,"97":188,"98":203,"99":225,"100":226,"101":223,"102":228,"103":232,"104":236,"105":238,"106":239,"107":242,"108":241,"109":239,"110":233,"111":234,"112":236,"113":235,"114":236,"115":237,"116":238,"117":241,"118":242,"119":241,"120":239,"121":240,"122":238,"123":238,"124":246,"125":248,"126":250,"127":244,"128":242,"129":243,"130":245,"131":248,"132":249,"133":251,"134":251,"135":251,"136":254,"137":255,"138":249,"139":247,"140":245,"141":246,"142":239,"143":242,"144":243,"145":243,"146":241,"147":242,"148":242,"149":243,"150":244,"151":243,"152":244,"153":244,"154":242,"155":242,"156":239,"157":241,"158":235,"159":177,"160":149,"161":155,"162":199},"ry":{"0":336,"1":328,"2":327,"3":339,"4":345,"5":351,"6":370,"7":375,"8":379,"9":385,"10":383,"11":385,"12":365,"13":365,"14":359,"15":372,"16":376,"17":372,"18":364,"19":394,"20":404,"21":401,"22":396,"23":400,"24":399,"25":404,"26":405,"27":406,"28":411,"29":416,"30":391,"31":367,"32":338,"33":306,"34":166,"35":175,"36":174,"37":175,"38":175,"39":176,"40":178,"41":181,"42":180,"43":180,"44":181,"45":181,"46":183,"47":186,"48":186,"49":187,"50":188,"51":188,"52":190,"53":190,"54":189,"55":187,"56":187,"57":188,"58":189,"59":189,"60":189,"61":190,"62":190,"63":189,"64":188,"65":189,"66":192,"67":191,"68":191,"69":192,"70":191,"71":191,"72":190,"73":191,"74":191,"75":190,"76":191,"77":187,"78":191,"79":190,"80":190,"81":191,"82":190,"83":186,"84":193,"85":192,"86":192,"87":192,"88":193,"89":193,"90":192,"91":193,"92":192,"93":194,"94":190,"95":187,"96":190,"97":188,"98":203,"99":225,"100":226,"101":223,"102":228,"103":232,"104":236,"105":238,"106":239,"107":242,"108":241,"109":239,"110":233,"111":234,"112":236,"113":235,"114":236,"115":237,"116":238,"117":241,"118":242,"119":241,"120":239,"121":240,"122":238,"123":238,"124":246,"125":248,"126":250,"127":244,"128":242,"129":243,"130":245,"131":248,"132":249,"133":251,"134":251,"135":251,"136":254,"137":255,"138":249,"139":247,"140":245,"141":246,"142":239,"143":242,"144":243,"145":243,"146":241,"147":242,"148":242,"149":243,"150":244,"151":243,"152":244,"153":244,"154":242,"155":242,"156":239,"157":241,"158":235,"159":177,"160":149,"161":155,"162":199}}'

window.onload = function() {
    //start the webgazer tracker
    webgazer.setRegression('linear') /* currently must set regression and tracker */
        .setTracker('clmtrackr')
        .setGazeListener(function(data, clock) {
            if( webgazer.pupil.getPupils() ){
               //console.log("left pupil: ", eyesObj.left.pupil, "\t right pupil: ", eyesObj.right.pupil);
               console.log(eyesObj);
            }
        })
        .begin()
        .showPredictionPoints(false); /* shows a square every 100 milliseconds where current prediction is */


    //Set up the webgazer video feedback.
    var setup = function() {

        //Set up the main canvas. The main canvas is used to calibrate the webgazer.
        var canvas = document.getElementById("plotting_canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        canvas.style.position = 'fixed';
    };

    function checkIfReady() {
        if (webgazer.isReady()) {
            //setup();
            webgazer.setVideoViewerSize(900,450);
            webgazer.showVideo(true);
        } else {
            setTimeout(checkIfReady, 100);
        }
    }
    setTimeout(checkIfReady,100);
};

//called before 'unload' or leaving page
window.onbeforeunload = function() {
    //webgazer.end(); //Uncomment if you want to save the data even if you reload the page.
    window.localStorage.clear(); //Comment out if you want to save data across different sessions
    
    var d = new Date();
    d.setTime(d.getTime() + (1*60*1000)); //1 minute lifetime
    var expires = "expires="+ d.toUTCString();

    document.cookie="state=patient_done;" + expires + ";path=/;";
    //document.cookie="meData=" + dummy_coord + ";" + expires + ";path=/;";
    this.sessionStorage.setItem("meData", this.dummy_coord);
    document.cookie="ended=true;" + expires + ";path=/;";
    document.cookie="MEdone=true;" + expires + ";path/;";
}

/**
 * Restart the calibration process by clearing the local storage and reseting the calibration point
 */
function Restart(){
    document.getElementById("Accuracy").innerHTML = "<a>Not yet Calibrated</a>";
    //ClearCalibration();
    //PopUpInstruction();
}
